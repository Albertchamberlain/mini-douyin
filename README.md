**å®žçŽ°çš„ä¸€ä¸ªminiç‰ˆæŠ–éŸ³æœåŠ¡ç«¯**

## 1.åŸºç¡€æŽ¥å£
   1. - [x]  è§†é¢‘FeedsæµæŽ¥å£   
   2. - [x]  ç”¨æˆ·æ³¨å†Œ
   3. - [x]  ç”¨æˆ·ç™»å½•      
   4. - [x]  ç”¨æˆ·ä¿¡æ¯   
   5. - [x]  æŠ•ç¨¿æŽ¥å£
   6. - [x]  å‘å¸ƒæŽ¥å£

## 2.æ‰©å±•æŽ¥å£ - I
   1. - [x]  èµžæ“ä½œ
   2. - [x]  ç‚¹èµžåˆ—è¡¨
   3. - [x]  è¯„è®ºæ“ä½œ
   4. - [x]  è¯„è®ºåˆ—è¡¨
   
## 2.æ‰©å±•æŽ¥å£ - II
   1. - [x]  å…³æ³¨æ“ä½œ
   2. - [x]  å…³æ³¨åˆ—è¡¨
   3. - [x]  ç²‰ä¸åˆ—è¡¨






## é¡¹ç›®ç»“æž„

```shell
douyin/
â”œâ”€â”€ conf
â”œâ”€â”€ controller
â”œâ”€â”€ log
â”œâ”€â”€ middleware
â”œâ”€â”€ model
â”œâ”€â”€ routes
â”œâ”€â”€ serializer
â”œâ”€â”€ log
â”œâ”€â”€ service
â””â”€â”€ util
```

- conf : ç”¨äºŽå­˜å‚¨é…ç½®æ–‡ä»¶
- controller : ç”¨äºŽå¤„ç†è¯·æ±‚JSONæ ¼å¼è¿”å›ž
- log : ç”¨äºŽå­˜å‚¨æ—¥å¿—æ–‡ä»¶
- middleware : è‡ªå®šä¹‰çš„ä¸­é—´ä»¶
- model : gormä½¿ç”¨çš„æ•°æ®åº“æ¨¡åž‹
- routes : è·¯ç”±è½¬å‘
- serializerï¼šå®šä¹‰åºåˆ—åŒ–jsonçš„ç»“æž„ä½“
- logï¼šå­˜æ”¾æ—¥å¿—æ–‡ä»¶
- service : å…·ä½“çš„åŠŸèƒ½å¤„ç†é€»è¾‘
- utilï¼šå·¥å…·ç±»


## å¦‚ä½•è¿è¡Œæœ¬é¡¹ç›®

**1.ä¸‹è½½ç¬¬ä¸‰æ–¹åº“**
```go
go mod tidy
```
**2.é…ç½®æ•°æ®åº“**
1. ä½¿ç”¨COSè¿›è¡ŒçŸ­è§†é¢‘å­˜å‚¨ï¼Œç”³è¯·COSèµ„æºï¼Œåœ¨é…ç½®ä¸­å¡«å†™å¯¹åº”bucket,id,key
2. é¡¹ç›®å·²ç»ä½¿ç”¨gorm2ä¸”å¼€å¯äº†**æ•°æ®åº“è‡ªåŠ¨è¿ç§»æ¨¡å¼**ï¼Œä»…éœ€åœ¨conf/config.iniæ–‡ä»¶ä¸­é…ç½®ç›¸å…³å‚æ•°ï¼Œå»ºç«‹douyinæ•°æ®åº“ï¼Œå¯åŠ¨æœåŠ¡å™¨å³å¯

**3.è¿è¡Œ**
```go
go run main.go
```
è¿è¡Œé¡¹ç›®ç”Ÿæˆæ•°æ®è¡¨åŽï¼Œè¯·è¿è¡Œä»¥ä¸‹SQLè¯­å¥ä½¿å¾—Gormå¤§å°å†™æ•æ„Ÿ
```SQL
ALTER TABLE user MODIFY COLUMN name VARCHAR(50) BINARY CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL;
```
**4.æµ‹è¯•**
1. å¯ä»¥ä½¿ç”¨**postman**å¯¹æŽ¥å£è¿›è¡Œæµ‹è¯•
![postman](docs/postman.png)
1. ä¹Ÿå¯ä½¿ç”¨å®¢æˆ·ç«¯æµ‹è¯•



2. - 


**åŽç»­çš„æƒ³æ³•**
1. - [ ] é€€å‡ºç™»å½•å®žçŽ°(å‰ç½®æ¡ä»¶ï¼šç”¨æˆ·çš„Tokenå­˜å…¥Redisä¸­)  
ç”¨æˆ·é‡æ–°ç™»å½•ä»¥åŽç³»ç»Ÿåº”è¯¥æŠŠè¿™ä¸ªç”¨æˆ·ä¹‹å‰ç­¾å‘çš„tokenéƒ½æ¸…é™¤æŽ‰ã€‚å¦‚ä¸‹è®¾è®¡ï¼š
redisçš„keyå¯ä»¥æ˜¯ç”¨æˆ·çš„idåŠ ä¸Štokenï¼Œå¦‚key:"wfwjej24149uwehi3i#1"ï¼Œï¼ˆç¬¦å·#å‰ä¸ºtokenï¼Œç¬¦å·#åŽä¸ºidï¼‰è¿™æ ·å°±å¯ä»¥é€šè¿‡tokenæ‰¾idï¼Œä¹Ÿå¯ä»¥é€šè¿‡idæ‰¾åˆ°tokenã€‚
å½“ç”¨æˆ·é‡æ–°ç™»å½•çš„æ—¶å€™ï¼Œè‚¯å®šå¯ä»¥èŽ·å–åˆ°ç”¨æˆ·çš„idï¼Œç„¶åŽé€šè¿‡idåœ¨Redisä¸­æ‰¾åˆ°æ—§çš„tokenæ•°æ®ï¼Œå°†å®ƒä»¬æ¸…é™¤ï¼Œæˆ–è€…æ›´æ–°ç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³ã€‚
2. - [ ] è¸©è¯„è®º(æŠ–éŸ³æ–°å¢žåŠŸèƒ½)
3. - [x] ä½¿ç”¨bloomfilteråˆ¤æ–­é‡å¤ç”¨æˆ·åï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°(æœåŠ¡å™¨é‡å¯åŽåŽŸæœ¬ç»´æŠ¤åœ¨å†…å­˜ä¸­çš„ç”¨æˆ·åä¼šä¸¢å¤±ï¼Œå¯ä»¥åŠ ä¸€å±‚redisä¸­ï¼Œç„¶åŽé‡å¯æœåŠ¡å™¨æ—¶ï¼Œåˆ¤æ–­filteræ˜¯å¦ä¸ºç©ºï¼Œç„¶åŽåˆ©ç”¨è‡ªåŠ¨åŒ–ä»»åŠ¡å†™å…¥æœåŠ¡å™¨å†…å­˜)
4. - [ ] æµ‹è¯•æ–¹æ³•å®Œå–„
5. - [ ] æ¯æ—¥æŽ’è¡Œæ¦œ,å®šæ—¶ä»»åŠ¡cron+Rediså®žçŽ°
6. - [ ] æ—¥å¿—å†™å…¥æœ¬åœ°logæ–‡ä»¶(å®žçŽ°loggerä¸­é—´ä»¶)
7. - [ ] ç™»å½•æŽ¥å£é˜²åˆ·  èŽ·å–è¯·æ±‚ç”¨æˆ·çš„IP,åœ¨Redisä¸­ç»´æŠ¤ä¸€ä¸ªé»‘åå•çª—å£
8. - [ ] ä»¤ç‰Œæ¡¶ç®—æ³•èƒ½å¤Ÿåœ¨é™åˆ¶æ•°æ®çš„å¹³å‡ä¼ è¾“é€ŸçŽ‡çš„åŒæ—¶ï¼Œä¿è¯æœåŠ¡ç«¯ä¸è¢«æ‰“åž®ï¼Œè¿˜å…è®¸æŸç§ç¨‹åº¦çš„çªå‘ä¼ è¾“ï¼Œä½¿ç”¨äº†goè‡ªå¸¦çš„é™æµæ¨¡å—time/rate,ä¹Ÿå¯ä»¥çœ‹çœ‹ä¸€äº›å¼€æºå®žçŽ°
9. - [ ] ç‚¹èµžæ¶ˆæ¯å¼‚æ­¥åŒ–å¤„ç†  é€‰åž‹æ¶ˆæ¯é˜Ÿåˆ—ï¼Œclickhouse è§£æžbinlogåˆ°Kafka
10. - [ ] ä½¿ç”¨bloomFilterä¸ºç”¨æˆ·çš„æŽ¨èFeedæµåŽ»é‡,é¿å…å‘ˆçŽ°ç»™ç”¨æˆ·çš„è§†é¢‘æ˜¯å·²ç»æŽ¨é€è¿‡çš„ã€‚
æŽ¨é€Feedæµæ—¶é€šè¿‡å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­ï¼ŒæŽ¨é€å†…å®¹æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æžœå­˜åœ¨åˆ™ä¸æŽ¨é€ï¼Œå¦‚æžœä¸å­˜åœ¨åˆ™æŽ¨é€ï¼›bloomFilterå¯ä»¥å‡†ç¡®è¿‡æ»¤ç”¨æˆ·å·²ç»çœ‹è¿‡çš„å†…å®¹ã€‚å¯¹äºŽæ²¡æœ‰çœ‹è¿‡çš„æ–°å†…å®¹ï¼Œå¯èƒ½ç”±äºŽè¯¯åˆ¤çŽ‡è¿‡æ»¤æŽ‰æžå°çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æŽ¨èç»™ç”¨æˆ·çš„éƒ½æ˜¯æ— é‡å¤çš„ã€‚
11. - [ ] é’ˆå¯¹æ¸¸å®¢ä¸Žç™»å½•ç”¨æˆ·Feedsæµçš„æŽ¨é€ã€‚å¯¹äºŽæ¸¸å®¢ï¼Œæˆ‘ä»¬å¯ä»¥æŽ¨é€ç»™ä»–ä»¬ç‚¹èµžå¤šæˆ–è€…æŽ’è¡Œæ¦œé å‰çš„è§†é¢‘ï¼Œä¸€æ¬¡æž„é€ å‡º30æ¡ï¼Œå‘ˆç»™ç”¨æˆ·ã€‚å¯¹äºŽå·²ç»ç™»å½•çš„ç”¨æˆ·ï¼Œåˆç»†åˆ†ä¸ºä¸‹é¢ç¬¬8çš„æƒ…å†µðŸ‘‡
12. - [ ] ç™»å½•ç”¨æˆ·å…³æ³¨ä¸åŒç²‰ä¸é‡çš„ç”¨æˆ·æ—¶Feedsæµæ–¹å¼ã€‚å‡è®¾åœ¨æˆ‘ä»¬çš„å®žè·µä¸­å­˜åœ¨ä¸€ä¸ªå€¼ä¸ºFansCountï¼Œå½“ç”¨æˆ·ç²‰ä¸æ•°å¤§äºŽç­‰äºŽFansCountæ—¶ï¼Œæˆ‘ä»¬å®šä¹‰è¯¥ç”¨æˆ·ä¸ºæ˜Žæ˜Ÿç”¨æˆ·ï¼Œå°äºŽFansCountæ—¶è¯¥ç”¨æˆ·ä¸ºæ™®é€šç”¨æˆ·ã€‚å› æ­¤æœ‰äº†å¦‚ä¸‹æŽ¨é€è§„åˆ™ï¼šå½“è¯¥ç”¨æˆ·å…³æ³¨çš„æ™®é€šç”¨æˆ·å‘æŠ–éŸ³æ—¶ï¼Œç³»ç»Ÿä»Žæ•°æ®åº“ä¸­æ‹‰å–æ™®é€šç”¨æˆ·å¯¹åº”çš„æŠ–éŸ³è§†é¢‘å³å¯(æ‹‰æ¨¡å¼)ã€‚å½“è¯¥ç”¨æˆ·å…³æ³¨çš„æ˜Žæ˜Ÿç”¨æˆ·å‘æŠ–éŸ³æ—¶ï¼ˆæ˜Žæ˜Ÿç”¨æˆ·å¯èƒ½æœ‰å‡ ç™¾ä¸‡ï¼Œå‡ åƒä¸‡ï¼Œç”šè‡³ä¸Šäº¿çš„ç²‰ä¸é‡ï¼‰ï¼Œä¸ºäº†é˜²æ­¢åœ¨çž¬é—´ç»™æ˜Žæ˜Ÿç”¨æˆ·çš„ç²‰ä¸æŽ¨é€è§†é¢‘äº§ç”Ÿçš„å¤§é‡æŸ¥è¯¢æ‹–åž®æ•°æ®åº“ã€‚å› æ­¤æœ‰äº†é’ˆå¯¹æ˜Žæ˜Ÿç”¨æˆ·çš„è§„åˆ™ï¼šå½“æ˜Žæ˜Ÿç”¨æˆ·å‘æŠ–éŸ³æ—¶ï¼Œæˆ‘ä»¬æŠŠæ˜Žæ˜Ÿç”¨æˆ·çš„è§†é¢‘å†™å…¥åˆ°ä»–/å¥¹çš„ç²‰ä¸Feedsæµä¸­ï¼Œè€Œä¸æ˜¯è®©ä»–/å¥¹çš„ç²‰ä¸æ¥è¯·æ±‚ä»–/å¥¹å‘çš„æŠ–éŸ³(æŽ¨æ¨¡å¼)ã€‚
13. - [ ] Test And Set,Compare And Swapï¼ï¼ï¼ ç‰ˆæœ¬å·
14. - [ ] è¿ç§»jwt -> https://github.com/golang-jwt/jwt




